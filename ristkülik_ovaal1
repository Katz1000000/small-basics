GraphicsWindow.BackgroundColor = "White"
GraphicsWindow.PenColor = "Black"

rectangleW = 100
rectangleH = 80
ovalW = 100
ovalH = 80

boxW = 130
boxH = 100

GraphicsWindow.BrushColor = "Red"
rectangle = Shapes.AddRectangle(rectangleW, rectangleH)
rectX = 50
rectY = 50
Shapes.Move(rectangle, rectX, rectY)

GraphicsWindow.BrushColor = "Blue"
oval = Shapes.AddEllipse(ovalW, ovalH)
ovalX = 50
ovalY = 200
Shapes.Move(oval, ovalX, ovalY)

rectBoxX = 230
rectBoxY = 50
GraphicsWindow.DrawRectangle(rectBoxX, rectBoxY, boxW, boxH)

ovalBoxX = 230
ovalBoxY = 200
GraphicsWindow.DrawRectangle(ovalBoxX, ovalBoxY, boxW, boxH)

answerBoxX = 400
answerBoxY = 150
answerBoxW = 200
answerBoxH = 100
GraphicsWindow.DrawRectangle(answerBoxX, answerBoxY, answerBoxW, answerBoxH)

checkButtonX = 400
checkButtonY = 280
checkButtonW = 100
checkButtonH = 40
GraphicsWindow.BrushColor = "Green"
GraphicsWindow.FillRectangle(checkButtonX, checkButtonY, checkButtonW, checkButtonH)
GraphicsWindow.BrushColor = "Black"

GraphicsWindow.DrawText(rectBoxX + 25, rectBoxY - 25, "Ristkülik")
GraphicsWindow.DrawText(ovalBoxX + 35, ovalBoxY - 25, "Ovaal")
GraphicsWindow.DrawText(answerBoxX + 40, answerBoxY - 25, "Vastus")
GraphicsWindow.DrawText(checkButtonX + 10, checkButtonY + 10, "Kontrolli")

answerMessageX = answerBoxX + 40
answerMessageY = answerBoxY + 30
answerMessage = ""
selectedShape = ""

GraphicsWindow.MouseDown = OnMouseDown
GraphicsWindow.MouseUp = OnMouseUp
GraphicsWindow.MouseMove = OnMouseMove

Sub OnMouseDown
  x = GraphicsWindow.MouseX
  y = GraphicsWindow.MouseY

  If x>rectX And x<rectX+rectangleW And y>rectY And y<rectY+rectangleH Then
    selectedShape = "rectangle"
  ElseIf x>ovalX And x<ovalX+ovalW And y>ovalY And y<ovalY+ovalH Then
    selectedShape = "oval"
  EndIf
EndSub

Sub OnMouseUp
  selectedShape = ""

  x = GraphicsWindow.MouseX
  y = GraphicsWindow.MouseY

  If x>checkButtonX And x<checkButtonX+checkButtonW And y>checkButtonY And y<checkButtonY+checkButtonH Then

    rectCenterX = rectX + rectangleW/2
    rectCenterY = rectY + rectangleH/2
    ovalCenterX = ovalX + ovalW/2
    ovalCenterY = ovalY + ovalH/2

    If rectCenterX>rectBoxX And rectCenterX<rectBoxX+boxW And rectCenterY>rectBoxY And rectCenterY<rectBoxY+boxH Then
      rectCorrect = "True"
    Else
      rectCorrect = "False"
    EndIf

    If ovalCenterX>ovalBoxX And ovalCenterX<ovalBoxX+boxW And ovalCenterY>ovalBoxY And ovalCenterY<ovalBoxY+boxH Then
      ovalCorrect = "True"
    Else
      ovalCorrect = "False"
    EndIf

    GraphicsWindow.BrushColor = "White"
    GraphicsWindow.FillRectangle(answerBoxX+1, answerBoxY+1, answerBoxW-2, answerBoxH-2)
    GraphicsWindow.BrushColor = "Black"

    If rectCorrect="True" And ovalCorrect="True" Then
      GraphicsWindow.DrawText(answerMessageX, answerMessageY, "Õige!")
    Else
      GraphicsWindow.DrawText(answerMessageX, answerMessageY, "Vale!")
    EndIf

  EndIf
EndSub

Sub OnMouseMove
  x = GraphicsWindow.MouseX
  y = GraphicsWindow.MouseY

  If selectedShape = "rectangle" Then
    rectX = x - rectangleW/2
    rectY = y - rectangleH/2
    Shapes.Move(rectangle, rectX, rectY)
  ElseIf selectedShape = "oval" Then
    ovalX = x - ovalW/2
    ovalY = y - ovalH/2
    Shapes.Move(oval, ovalX, ovalY)
  EndIf
EndSub

